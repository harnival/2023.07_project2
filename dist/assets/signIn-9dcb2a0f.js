import{_ as C,u as D,a as A,r as q,b as o,o as M,c as V,d as c,e as u,f as e,g as l,w as g,v as f,t as B,h as y,i as P,j as F,k as N,l as L,m as T,n as j,p as H,q as $,s as z,x as G}from"./index-ad6b4843.js";const a=r=>(z("data-v-01896fbf"),r=r(),G(),r),J={id:"signInBox"},K={key:0,class:"signpage_1 signpage"},O={class:"inputwrap signEmail"},Q=a(()=>e("label",{for:"signin_email"},"이메일",-1)),X=a(()=>e("p",{class:"checktext"},null,-1)),Y={class:"pwdBox"},Z={class:"inputwrap signPwd"},ee=a(()=>e("label",{for:"signin_pwd"},"비밀번호",-1)),te=a(()=>e("br",null,null,-1)),se={class:"inputwrap signPwdconfirm"},ne=a(()=>e("label",{for:"signin_pwd"},"비밀번호 확인",-1)),ie=["textContent"],ae=["disabled"],le={key:1,class:"signpage_2 signpage"},oe=a(()=>e("p",null,"정보를 입력해주세요",-1)),re={class:"signpage_2_wrap"},de={class:"avatar"},ce={key:0,class:"clickMe"},ue=a(()=>e("img",{src:""},null,-1)),pe=a(()=>e("li",null,"- 프로필 사진을 등록해주세요.",-1)),_e=a(()=>e("li",null,"- '설정' 에서 수정할 수 있습니다.",-1)),me=a(()=>e("li",null,"- 또 뭐 쓰지",-1)),ge=a(()=>e("div",{class:"avatarModal"},[e("canvas")],-1)),fe={class:"inputwrap"},ve=a(()=>e("label",{for:"signin_nickname"},"이름",-1)),he=a(()=>e("button",{type:"button"},"취소",-1)),we={__name:"signIn",setup(r){const k=D(),E=A();let n=q({}),p=o(!1),v=o(""),_=o(1);const I=function(s){const t=s.target.value;v.value=t==n.pwd?"비밀번호가 일치합니다.":"다시 확인해주세요.",p=t==n.pwd};o(1);const x=()=>{signin_email.value?signin_pwd?signin_pwdconfirm?signin_pwd.value.length<6?(signin_pwd.classList.add("requiredLength"),signin_pwd.parentElement.classList.add("requiredLength")):signin_email.value.match(/@/g)?_.value=2:(signin_email.classList.add("requiredEmail"),signin_email.parentElement.classList.add("requiredEmail")):(signin_pwdconfirm.classList.add("required"),signin_pwdconfirm.parentElement.classList.add("required")):(signin_pwd.classList.add("required"),signin_pwd.parentElement.classList.add("required")):(signin_email.classList.add("required"),signin_email.parentElement.classList.add("required"))};let m=o(!0);const S=()=>{document.querySelector(".avatarWrap input").click()},U=s=>{const t=document.querySelector(".avatarWrap img"),i=document.querySelector(".avatarWrap");i.style.background="";const b=document.querySelector(".avatarWrap input").files[0],d=new FileReader;d.addEventListener("load",function(){m.value=null,t.src=d.result,t.clientWidth>=t.clientHeight?t.style.height="100%":t.style.width="100%",n.photoURL=d.result}),b&&d.readAsDataURL(b)},W=()=>{const s=document.querySelector(".avatarWrap img");s.src="";const t=document.querySelector(".avatarWrap");t.style.background='url("/img/img/rodent.png") center/cover no-repeat',m.value=!0},R=()=>{signin_nickname.value?(p&&N(L,n.email,n.pwd).then(s=>{const t=s.user,i={id:t.uid,email:t.email,uid:t.uid,name:n.name,photoURL:n.photoURL?n.photoURL:"",playlist:"",follower:"",follering:""};T(j(H,"account/"+t.uid),i),$(L.currentUser,{displayName:n.name,photoURL:n.photoURL}),E.commit("loginAccount",i)}).catch(s=>{const t=s.code;console.log(s),t=="auth/email-already-in-use"?alert("이미 가입된 이메일입니다."):t=="auth/weak-password"&&alert("비밀번호는 6자리 이상 입력하십시오.")}),k.push("/")):alert("이름을 입력하세요")};let h=q(document.querySelectorAll(".inputwrap input"));M(function(){w()}),V(function(){w()});const w=function(){h=document.querySelectorAll(".inputwrap input"),h.forEach(s=>{const i=s.parentElement.querySelector("label");s.addEventListener("focus",function(){i.classList.add("label_focused","label_value"),s.classList.remove("required","requiredEmail","requiredLength"),s.parentElement.classList.remove("required","requiredLength","requiredEmail")}),s.addEventListener("blur",function(){s.value==""?i.classList.remove("label_focused","label_value"):i.classList.remove("label_focused")})})};return(s,t)=>(c(),u("div",J,[e("form",{onSubmit:t[3]||(t[3]=F(()=>{},["prevent"]))},[l(_)==1?(c(),u("div",K,[e("div",O,[Q,g(e("input",{type:"text",name:"email",id:"signin_email","onUpdate:modelValue":t[0]||(t[0]=i=>l(n).email=i),required:""},null,512),[[f,l(n).email]])]),X,e("div",Y,[e("div",Z,[ee,g(e("input",{type:"password",name:"pwd",id:"signin_pwd","onUpdate:modelValue":t[1]||(t[1]=i=>l(n).pwd=i),required:""},null,512),[[f,l(n).pwd]])]),te,e("div",se,[ne,e("input",{type:"password",name:"pwdconfirm",id:"signin_pwdconfirm",required:"",onChange:I},null,32)]),e("p",{class:"pwdInfo",textContent:B(l(v))},null,8,ie)]),e("p",null,[e("button",{type:"button",onClick:x,disabled:!l(p)},"확인",8,ae)])])):l(_)==2?(c(),u("div",le,[oe,e("div",re,[e("div",de,[e("div",{class:"avatarWrap",onClick:S},[l(m)?(c(),u("div",ce,"click")):y("",!0),ue,e("input",{type:"file",name:"avatar_img",id:"avatar_img_input",accept:"image/*",onInput:U},null,32)]),e("div",{class:"avatar_text"},[e("ul",null,[pe,_e,me,e("li",null,[P("- "),e("span",{class:"toDefaultImg",onClick:W},"기본 이미지 적용하기")])])]),ge]),e("div",fe,[ve,g(e("input",{type:"text",name:"nickname",id:"signin_nickname","onUpdate:modelValue":t[2]||(t[2]=i=>l(n).name=i),required:""},null,512),[[f,l(n).name]])])]),e("div",{class:"btns"},[e("button",{type:"button",onClick:R},"저장"),he])])):y("",!0)],32)]))}},qe=C(we,[["__scopeId","data-v-01896fbf"]]);export{qe as default};
