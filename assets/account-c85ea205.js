import{_ as z,a as G,E as J,u as K,b as k,r as b,A as j,l as _,d as n,e as a,f as t,g as e,t as m,h as u,j as p,i as w,w as Q,v as X,F as I,C as S,s as Y,x as Z,H as tt,n as y,p as f,I as B,m as D}from"./index-ad6b4843.js";const et="/img/img/plus.png";const v=g=>(Y("data-v-d3b69b6b"),g=g(),Z(),g),st={id:"accountBox"},ot={class:"a_profile"},lt={class:"a_p_content"},nt={class:"a_p_c_image"},at=["src"],it={class:"a_p_c_text"},ct={class:"a_p_c_name"},rt={class:"a_p_c_n_name"},_t={class:"a_p_c_n_id"},ut={class:"a_p_c_follow"},dt=v(()=>t("span",null,"팔로워",-1)),pt={key:0},mt=v(()=>t("span",null,"팔로잉",-1)),vt={class:"a_p_btns"},ht={key:1},yt=["onClick"],ft=["onClick"],gt={class:"a_playlist"},kt={class:"a_pl_title"},bt=v(()=>t("h3",null,"내 플레이리스트",-1)),wt={class:"a_playlistWrap"},Ct={key:0,class:"a_pl_nolist"},Ut=v(()=>t("p",null,"플레이리스트가 없습니다.",-1)),$t=["onClick"],Lt=v(()=>t("strong",null,"+ ",-1)),It={key:1},St={key:0,class:"a_pl_list_new"},Dt={key:0,class:"a_pl_btns"},xt=["onClick"],Et={key:1,class:"a_pl_makeList"},Rt=["onSubmit"],Ft={key:0,src:"",class:"a_pl_m_c_image"},Tt={key:1,class:"a_pl_m_cover_before"},Vt=v(()=>t("img",{src:et,alt:"",style:{opacity:"0.5"}},null,-1)),jt=v(()=>t("p",null,[w(" - 클릭하여 이미지를 선택해주세요. "),t("br"),w(" - 미입력 시, 플레이리스트에 추가된 트랙의 앨범 이미지로 대체됩니다. ")],-1)),Bt=[Vt,jt],Ot={class:"a_pl_m_text"},qt={class:"a_pl_m_tag"},At={class:"a_pl_m_tag_inputwrap"},Mt=["onClick"],Pt=["onClick"],Nt={class:"a_pl_m_btn"},Wt=v(()=>t("button",{type:"submit"},"생성하기",-1)),Ht=["onClick"],zt={class:"a_pl_l_cover"},Gt=["src"],Jt={class:"a_pl_l_title"},Kt={key:0,class:"pl_title_btn"},Qt={key:0,class:"sec1_title_menu"},Xt={class:"a_pl_l_text"},Yt={class:"a_pl_l_tag"},Zt={__name:"account",setup(g){const C=G(),i=J(),x=K();let U=k(""),c=b({}),h=k(null);j(()=>i.params.ids,l=>{l=="my"?U.value=_.currentUser.uid:U.value=l,tt(y(f,"account/"+U.value),function(o){const s=o.val();c={photoURL:s.photoURL,name:s.name,id:s.id,uid:s.uid,follower:s.follower?s.follower:null,following:s.following?s.following:null,playlist:s.playlist},h.value=!!c.playlist,console.log("[onValue account] done")})},{immediate:!0,deep:!0});const E=b({account:i.params.ids=="my"?C.getters.getAccount:C.getters.getDataUsers[i.params.ids],playlists:C.getters.getDataPlaylists});let R=b({});j(()=>[E.account,E.playlists],l=>{if(l[0])if(!l[0].playlist)h.value=!1;else{h.value=!0;for(const o in l[0].playlist)R[o]=l[1][o]}},{immediate:!0,deep:!0});let $=k(null);const O=function(){h.value=!0,F()},F=async function(){$.value=!0,document.querySelector(".a_pl_list_new")&&document.querySelector(".a_pl_list_new").classList.add("activated")};let d=b({});d.tag=[],d.tracks=[],d.uid=i.params.ids=="my"?_.currentUser.uid:i.params.ids;const T=function(l){const o=l.target.value;o&&(d.tag.splice(0,0,o),l.target.value="")},q=function(l){d.tag.splice(l,1),console.log(d.tag)};let L=k(!0);const A=()=>{document.getElementById("a_pl_m_coverInput").click(),L.value=null},M=l=>{const o=l.target.files[0],s=new FileReader,r=document.querySelector(".a_pl_m_c_image");s.addEventListener("load",async function(){r.src=s.result,d.cover=s.result,console.log("[dsddsdd]",r),r.clientWidth>=r.clientHeight?r.style.height="100%":r.style.width="100%"}),o&&s.readAsDataURL(o)},P=function(){const l=y(f,"playlists"),o=B(l,d).key,s={};s["account/"+_.currentUser.uid+"/playlist/"+o]=!0,D(y(f),s),Object.entries(d.tag).forEach(V=>{const H=y(f,"hashs/"+V[1]);B(H,o)}),$.value=!1},N=function(){const l=i.params.ids,o=_.currentUser.uid,s={};s[`account/${l}/follower/${o}`]=!0,s[`account/${o}/following/${l}`]=!0,D(y(f),s)},W=function(){const l=i.params.ids,o=_.currentUser.uid,s={};s[`account/${l}/follower/${o}`]=null,s[`account/${o}/following/${l}`]=null,D(y(f),s)};return(l,o)=>(n(),a("div",st,[t("div",ot,[t("div",lt,[t("div",nt,[t("img",{src:e(c).photoURL,alt:""},null,8,at)]),t("div",it,[t("div",ct,[t("strong",rt,m(e(c).name),1),t("span",_t,"@"+m(e(c).id),1)]),t("div",ut,[t("div",null,[dt,t("span",null,m(e(c).follower?Object.keys(e(c).follower).length:0),1)]),e(i).params.ids=="my"||e(i).params.ids==e(_).currentUser.uid?(n(),a("div",pt,[mt,t("span",null,m(e(c).following?Object.keys(e(c).following).length:0),1)])):u("",!0)])])]),t("div",vt,[e(i).params.ids=="my"||e(i).params.ids==e(_).currentUser.uid?(n(),a("a",{key:0,href:"/",onClick:o[0]||(o[0]=p(s=>e(x).push({name:"setting"}),["prevent"]))},"프로필 수정")):u("",!0),e(i).params.ids!="my"&&e(i).params.ids!=e(_).currentUser.uid?(n(),a("div",ht,[!e(c).follower||!e(c).follower[`${e(_).currentUser.uid}`]?(n(),a("a",{key:0,href:"/",onClick:p(N,["prevent"])},"팔로우",8,yt)):u("",!0),e(c).follower&&e(c).follower[`${e(_).currentUser.uid}`]?(n(),a("a",{key:1,href:"/",onClick:p(W,["prevent"])},"팔로우 취소",8,ft)):u("",!0)])):u("",!0)])]),t("div",gt,[t("div",kt,[bt,t("p",null,[t("button",{type:"button",onClick:o[1]||(o[1]=p(s=>l.listtype=!0,["prevent"]))}," 더보기")])]),t("div",wt,[e(h)?u("",!0):(n(),a("div",Ct,[Ut,e(i).params.ids=="my"||e(i).params.ids==e(_).currentUser.uid?(n(),a("button",{key:0,type:"button",class:"a_pl_newlist1",onClick:p(O,["prevent"])},[Lt,w(" 새 플레이리스트 추가")],8,$t)):u("",!0)])),e(h)?(n(),a("ul",It,[e(i).params.ids=="my"||e(i).params.ids==e(_).currentUser.uid?(n(),a("li",St,[e($)?(n(),a("div",Et,[t("form",{onSubmit:p(P,["prevent"])},[t("div",{class:"a_pl_m_cover",onClick:A},[t("input",{type:"file",name:"cover_img",id:"a_pl_m_coverInput",onInput:M,accept:"image/*"},null,32),e(L)?u("",!0):(n(),a("img",Ft)),e(L)?(n(),a("div",Tt,Bt)):u("",!0)]),t("div",Ot,[Q(t("input",{type:"text",name:"",id:"","onUpdate:modelValue":o[2]||(o[2]=s=>e(d).title=s),placeholder:"제목을 입력하세요.",required:""},null,512),[[X,e(d).title]])]),t("div",qt,[t("div",At,[t("input",{type:"text",onChange:T,placeholder:"#"},null,32),t("a",{href:"/",onClick:p(T,["prevent"])},"해시태그 추가",8,Mt)]),t("ul",null,[(n(!0),a(I,null,S(e(d).tag,(s,r)=>(n(),a("li",{key:r},[w(" #"+m(s)+" ",1),t("a",{href:"/",onClick:p(V=>q(r),["prevent"])},null,8,Pt)]))),128))])]),t("div",Nt,[Wt,t("button",{type:"button",onClick:o[3]||(o[3]=()=>{})},"취소")])],40,Rt)])):(n(),a("div",Dt,[t("a",{href:"/",onClick:p(F,["prevent"])},"+ 새 플레이리스트 만들기",8,xt)]))])):u("",!0),(n(!0),a(I,null,S(Object.entries(e(R)).reverse(),s=>(n(),a("li",{class:"a_pl_list",key:s[0]},[t("div",{class:"a_pl_listWrap",onClick:r=>e(x).push({name:"player",params:{listkey:s[0]}})},[t("div",zt,[t("img",{src:s[1].cover},null,8,Gt)]),t("div",Jt,[t("p",null,m(s[1].title),1),s.uid==e(_).currentUser.uid?(n(),a("div",Kt,[t("button",{type:"button",onClick:o[4]||(o[4]=r=>l.clickOpen(l.key))},"메뉴"),l.openMenuPop==l.key?(n(),a("div",Qt,[t("a",{href:"/",onClick:o[5]||(o[5]=p(()=>{},["prevent"]))},"수정"),t("a",{href:"/",onClick:o[6]||(o[6]=p(()=>{},["prevent"]))},"삭제")])):u("",!0)])):u("",!0)]),t("div",Xt,[t("p",null,m(e(c).name),1),t("p",null,m(s[1].totalLength?s[1].totalLength:"--"),1)]),t("div",Yt,[t("ul",null,[(n(!0),a(I,null,S(s[1].tag,r=>(n(),a("li",null,"# "+m(r),1))),256))])])],8,Ht)]))),128))])):u("",!0)])])]))}},ee=z(Zt,[["__scopeId","data-v-d3b69b6b"]]);export{ee as default};
